<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>å®‰è£…ä¾èµ– | ç ´æ™“ï¼šé»‘å¤œä¹‹ä¸­çš„ Electron é£è¡ŒæŒ‡å—</title>
    <meta name="description" content="ğŸ¨ Electron æ²¡é‚£ä¹ˆéš¾">
    
    
    <link rel="preload" href="/electron-flyer/assets/css/0.styles.3d6eb61a.css" as="style"><link rel="preload" href="/electron-flyer/assets/js/app.37dc6e8c.js" as="script"><link rel="preload" href="/electron-flyer/assets/js/21.1073c24e.js" as="script"><link rel="prefetch" href="/electron-flyer/assets/js/10.d6a7e726.js"><link rel="prefetch" href="/electron-flyer/assets/js/11.887eb323.js"><link rel="prefetch" href="/electron-flyer/assets/js/12.91b28bd0.js"><link rel="prefetch" href="/electron-flyer/assets/js/13.2a080c63.js"><link rel="prefetch" href="/electron-flyer/assets/js/14.e6db4937.js"><link rel="prefetch" href="/electron-flyer/assets/js/15.4888b394.js"><link rel="prefetch" href="/electron-flyer/assets/js/16.6209dfc4.js"><link rel="prefetch" href="/electron-flyer/assets/js/17.4dabdbda.js"><link rel="prefetch" href="/electron-flyer/assets/js/18.d91d10ee.js"><link rel="prefetch" href="/electron-flyer/assets/js/19.2288f168.js"><link rel="prefetch" href="/electron-flyer/assets/js/2.6cf72073.js"><link rel="prefetch" href="/electron-flyer/assets/js/20.1d66ae28.js"><link rel="prefetch" href="/electron-flyer/assets/js/22.9864bcb1.js"><link rel="prefetch" href="/electron-flyer/assets/js/23.0099ea93.js"><link rel="prefetch" href="/electron-flyer/assets/js/24.2924e65e.js"><link rel="prefetch" href="/electron-flyer/assets/js/25.9ffdaddc.js"><link rel="prefetch" href="/electron-flyer/assets/js/26.549bcbd0.js"><link rel="prefetch" href="/electron-flyer/assets/js/3.7de79766.js"><link rel="prefetch" href="/electron-flyer/assets/js/4.e4c889ba.js"><link rel="prefetch" href="/electron-flyer/assets/js/5.968ec6b8.js"><link rel="prefetch" href="/electron-flyer/assets/js/6.0f1acbba.js"><link rel="prefetch" href="/electron-flyer/assets/js/7.08f680e1.js"><link rel="prefetch" href="/electron-flyer/assets/js/8.01be9bf3.js"><link rel="prefetch" href="/electron-flyer/assets/js/9.b7ab19cb.js">
    <link rel="stylesheet" href="/electron-flyer/assets/css/0.styles.3d6eb61a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme__container sidebar-open"><div class="row"><div class="col-md-2"><div class="sidebar"><div class="group"><div class="group__title">ç« èŠ‚å†…å®¹</div> <div class="group__body"><!---->  <div name="1.html" class="group__category category"><div class="category__label"><a href="/electron-flyer/1.html">å†å²ä»‹ç»</a></div> </div><div name="2.html" class="group__category category"><div class="category__label"><a href="/electron-flyer/2.html">å¼€å‘ç¯å¢ƒ</a></div> </div><div name="3.html" class="group__category category"><div class="category__label"><a href="/electron-flyer/3.html">ä»£ç å°è£…</a></div> </div><div name="4.html" class="group__category category"><div class="category__label"><a href="/electron-flyer/4.html" class="router-link-exact-active router-link-active">å‡½æ•°å¼</a></div> </div><div name="5.html" class="group__category category"><div class="category__label"><a href="/electron-flyer/5.html">è·å–å°è¯´å‘½ä»¤è¡Œç‰ˆï¼ˆä¸Šï¼‰</a></div> </div><div name="6.html" class="group__category category"><div class="category__label"><a href="/electron-flyer/6.html">è·å–å°è¯´å‘½ä»¤è¡Œç‰ˆï¼ˆä¸­ï¼‰</a></div> </div><div name="7.html" class="group__category category"><div class="category__label"><a href="/electron-flyer/7.html">è·å–å°è¯´å‘½ä»¤è¡Œç‰ˆï¼ˆä¸‹ï¼‰</a></div> </div><div name="8.html" class="group__category category"><div class="category__label"><a href="/electron-flyer/8.html">åµŒå…¥åˆ°åº”ç”¨ä¸­</a></div> </div><div name="9.html" class="group__category category"><div class="category__label"><a href="/electron-flyer/9.html">æ’ä»¶æœºåˆ¶</a></div> </div><div name="10.html" class="group__category category"><div class="category__label"><a href="/electron-flyer/10.html">æ–‡å­—è½¬è¯­éŸ³</a></div> </div><div name="11.html" class="group__category category"><div class="category__label"><a href="/electron-flyer/11.html">è®¾ç½®ä¸ä¿¡å·ä¸­æ–­</a></div> </div><div name="12.html" class="group__category category"><div class="category__label"><a href="/electron-flyer/12.html">æ’ä»¶å•†åº—</a></div> </div><div name="13.html" class="group__category category"><div class="category__label"><a href="/electron-flyer/13.html">ä¸‹è½½ä¸åˆ é™¤ï¼ˆä¸Šï¼‰</a></div> </div><div name="14.html" class="group__category category"><div class="category__label"><a href="/electron-flyer/14.html">ä¸‹è½½ä¸åˆ é™¤ï¼ˆä¸‹ï¼‰</a></div> </div><div name="15.html" class="group__category category"><div class="category__label"><a href="/electron-flyer/15.html">é€šçŸ¥æ ç¨‹åº</a></div> </div><div name="16.html" class="group__category category"><div class="category__label"><a href="/electron-flyer/16.html">æ’­æ”¾åŠŸèƒ½</a></div> </div><div name="17.html" class="group__category category"><div class="category__label"><a href="/electron-flyer/17.html">ç¾åŒ–ç•Œé¢</a></div> </div><div name="18.html" class="group__category category"><div class="category__label"><a href="/electron-flyer/18.html">æ•°æ®å¯è§†åŒ–ï¼ˆä¸Šï¼‰</a></div> </div><div name="19.html" class="group__category category"><div class="category__label"><a href="/electron-flyer/19.html">æ•°æ®å¯è§†åŒ–ï¼ˆä¸­ï¼‰</a></div> </div><div name="20.html" class="group__category category"><div class="category__label"><a href="/electron-flyer/20.html">æ•°æ®å¯è§†åŒ–ï¼ˆä¸‹ï¼‰</a></div> </div><div name="21.html" class="group__category category"><div class="category__label"><a href="/electron-flyer/21.html">åµŒå…¥åˆ°åº”ç”¨ä¸­</a></div> </div><div name="22.html" class="group__category category"><div class="category__label"><a href="/electron-flyer/22.html">æ‰“åŒ…åº”ç”¨</a></div> </div></div></div></div></div> <div class="col-md-10"><div class="page__container"><div class="content custom"><p>TypeScript æ˜¯å¾®è½¯å¼€å‘çš„ä¸€æ¬¾ JavaScript çš„è¶…é›†ï¼Œæä¾›é™æ€è¯­è¨€ç±»å‹ï¼Œè¿™æ ·å¯ä»¥è®©æˆ‘ä»¬çš„ä»£ç æ›´åŠ ç¬¦åˆè§„èŒƒï¼Œåœ¨å¤šäººåˆä½œå¼€å‘ä¸­éå¸¸æœ‰ç”¨ï¼Œç›®å‰å„å¤§ BAT å…¬å¸ï¼Œéƒ½æœ‰å®è·µ TypeScript è¯­è¨€ï¼Œä»¥ä¸‹ç®€ç§° tsã€‚</p> <p>ä½ æœ€å¥½æœ‰ä¸€äº› TypeScript åŸºç¡€ï¼Œæ²¡æœ‰çš„è¯ï¼Œå¯ä»¥çœ‹ä¸‹æˆ‘å½•åˆ¶çš„<a href="https://nodelover.me/course/ts-basic" target="_blank" rel="noopener noreferrer">å…è´¹è§†é¢‘<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ï¼Œæˆ–è€…<a href="https://github.com/MiYogurt/nodelover-books" target="_blank" rel="noopener noreferrer">å¼€æºä¹¦ç±<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ï¼Œè¿™åªæ˜¯ä¸ƒå…«æœ¬é‡Œé¢çš„ä¸€æœ¬ã€‚</p> <h2 id="å®‰è£…ä¾èµ–"><a href="#å®‰è£…ä¾èµ–" aria-hidden="true" class="header-anchor">#</a> å®‰è£…ä¾èµ–</h2> <p>å¯ä»¥å‚è€ƒ <a href="https://webpack.electron.build/add-ons#typescript" target="_blank" rel="noopener noreferrer">electron-webpack æ–‡æ¡£<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ï¼Œå®ƒä¼šå‘Šè¯‰ä½ æ›´å¤šçš„ä¿¡æ¯ã€‚</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> typescript electron-webpack-ts --dev
</code></pre></div><p><code>electron-webpack-ts</code> é‡Œé¢å…¶å®æ²¡æœ‰ä»»ä½•ä»£ç ï¼Œåªæ˜¯ä¼šå¸®ä½ å®‰è£…ä¸€äº›å¿…è¦çš„ä¾èµ–è€Œå·²ã€‚ç„¶ååˆå§‹åŒ– <code>tsconfig.json</code> é…ç½®æ–‡ä»¶ï¼Œå®ƒè§„å®šäº†ä½ å†™ ts çš„è§„èŒƒï¼Œä½ å¿…é¡»å…¨å±€å®‰è£…äº† <code>typescript</code> æ‰ä¼šæœ‰ <code>tsc</code> å‘½ä»¤ï¼Œå®ƒå¯ä»¥ç¼–è¯‘ ts æ–‡ä»¶ã€‚</p> <div class="language-sh extra-class"><pre class="language-text"><code>tsc --init
</code></pre></div><p>ä¿®æ”¹ <code>tsconfig.json</code> çš„æ–‡ä»¶å†…å®¹ï¼Œè®©å®ƒç»§æ‰¿ <code>electron-webpack</code> çš„é…ç½®ã€‚<code>types</code> æ˜¯ä¸ºäº†åšç±»å‹å…¼å®¹çš„ã€‚</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;extends&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./node_modules/electron-webpack/tsconfig-base.json&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;typeRoots&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;./src/main&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>åœ¨ä»‹ç»é‡Œé¢å°±æœ‰è¯´æ˜ rxjsï¼Œå®ƒå…¶å®æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„å·¥å…·ï¼Œä½†æ˜¯ç”±äºå­¦ä¹ æ›²çº¿çš„é™¡å³­ï¼Œåªæœ‰å°‘éƒ¨åˆ†ä»¥ Angular ä¸ºå¼€å‘æ ˆçš„å…¬å¸åœ¨ä½¿ç”¨å®ƒï¼Œæ¯”å¦‚ Daocloudï¼Œç°åœ¨æˆ‘ä»¬å…ˆå®‰è£…å®ƒã€‚</p> <div class="language-sh extra-class"><pre class="language-text"><code>npm install rxjs --save
</code></pre></div><p>å®‰è£… <code>electron-util</code> çš„å®šä¹‰æ–‡ä»¶ï¼Œè¿™ä¸ªå®šä¹‰æ–‡ä»¶è·Ÿ API å¯¹åº”æ˜¯ä¸å…¨çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜éœ€è¦è‡ªå·±é­”æ”¹ä¸€ä¸‹ã€‚</p> <div class="language-sh extra-class"><pre class="language-text"><code>npm install @types/electron-util --save-dev
</code></pre></div><p>ä»¥æ’ä»¶å½¢å¼æ·»åŠ ç±»å‹å¯ä»¥ <a href="https://www.tslang.cn/docs/handbook/declaration-files/templates/module-plugin-d-ts.html" target="_blank" rel="noopener noreferrer">å‚è€ƒè¿™é‡Œ<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> , æ–°å»º <code>src/main/shim.d.ts</code> æ–‡ä»¶</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> util <span class="token keyword">from</span> <span class="token string">'electron-util'</span>
<span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">'electron-util'</span> <span class="token punctuation">{</span>
  <span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">loadFile</span><span class="token punctuation">(</span><span class="token parameter">win<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> path<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">string</span></span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="ä¸»è¿›ç¨‹å…¥å£"><a href="#ä¸»è¿›ç¨‹å…¥å£" aria-hidden="true" class="header-anchor">#</a> ä¸»è¿›ç¨‹å…¥å£</h2> <ul><li>å¯¼å…¥ä¾èµ–</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> app<span class="token punctuation">,</span> BrowserWindow <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'electron'</span>
<span class="token keyword">import</span> util <span class="token keyword">from</span> <span class="token string">'electron-util'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> fromEvent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rxjs'</span>
</code></pre></div><p><a href="https://rxjs-cn.github.io/learn-rxjs-operators/operators/creation/fromevent.html" target="_blank" rel="noopener noreferrer">fromEvent<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> æ˜¯ <code>rxjs</code> çš„åˆ›å»ºå‡½æ•°ï¼Œä»¥ä¸‹ä¸¤ç§æ–¹å¼ç­‰ä»·ï¼Œå®ƒä¼šè‡ªåŠ¨ç›‘å¬ä½ çš„äº‹ä»¶ï¼Œé€šè¿‡ <code>subscribe</code> æ¥ä¼ é€’å¤„ç†å›è°ƒï¼Œç±»ä¼¼äº <code>Promise</code> çš„ <code>then</code></p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token function">fromEvent</span><span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;</span>win<span class="token punctuation">.</span>webContents<span class="token punctuation">,</span> <span class="token string">'devtools-opened'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  win<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token function">setImmediate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> win<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

win<span class="token punctuation">.</span>webContents<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'devtools-opened'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  win<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token function">setImmediate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> win<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>çª—å£åˆ›å»ºå‡½æ•°</li></ul> <p>å†…å®¹åŸºæœ¬è·Ÿä¹‹å‰çš„ä¸€è‡´ï¼Œåªä¸è¿‡åŠ äº† TypeScript ç±»å‹ï¼Œå®Œæ•´ä»£ç å¯ä»¥å‚è€ƒæºç ä»“åº“ã€‚</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> mainWindow<span class="token punctuation">:</span> BrowserWindow <span class="token operator">|</span> <span class="token keyword">null</span>

<span class="token keyword">function</span> <span class="token function">createMainWindow</span><span class="token punctuation">(</span><span class="token parameter">opts<span class="token operator">?</span><span class="token punctuation">:</span> Electron<span class="token punctuation">.</span>BrowserWindowConstructorOptions</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> win <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BrowserWindow</span><span class="token punctuation">(</span>opts<span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>util<span class="token punctuation">.</span><span class="token keyword">is</span><span class="token punctuation">.</span>development<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    win<span class="token punctuation">.</span>webContents<span class="token punctuation">.</span><span class="token function">openDevTools</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    win<span class="token punctuation">.</span><span class="token function">loadURL</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`http://localhost:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">ELECTRON_WEBPACK_WDS_PORT</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    util<span class="token punctuation">.</span><span class="token function">loadFile</span><span class="token punctuation">(</span>win<span class="token punctuation">,</span> <span class="token string">'index.html'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">fromEvent</span><span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;</span>win<span class="token punctuation">,</span> <span class="token string">'close'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>mainWindow <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// å…³é—­äº‹ä»¶</span>

  <span class="token function">fromEvent</span><span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;</span>win<span class="token punctuation">.</span>webContents<span class="token punctuation">,</span> <span class="token string">'devtools-opened'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// æ‰“å¼€å¼€å‘è€…å·¥å…·æ å</span>
    win<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">setImmediate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> win<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> win
<span class="token punctuation">}</span>
</code></pre></div><ul><li>äº‹ä»¶å¤„ç†å‡½æ•°</li></ul> <p>ä¸€ä¸ªä¸€ä¸ªçš„å†™ï¼Œä¸å¦‚å†™ä¸€ä¸ªå¾ªç¯æ¥å¸®æˆ‘ä»¬åšäº‹ä»¶ç»‘å®šã€‚</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">ready</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
  mainWindow <span class="token operator">=</span> <span class="token function">createMainWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">windowAllClosed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>util<span class="token punctuation">.</span><span class="token keyword">is</span><span class="token punctuation">.</span>macos<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    app<span class="token punctuation">.</span><span class="token function">quit</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">activate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>mainWindow<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    mainWindow <span class="token operator">=</span> <span class="token function">createMainWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> AppEventMap<span class="token punctuation">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  ready<span class="token punctuation">,</span>
  <span class="token string">'window-all-closed'</span><span class="token punctuation">:</span> windowAllClosed<span class="token punctuation">,</span>
  activate
<span class="token punctuation">}</span>

Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>AppEventMap<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">eventName</span> <span class="token operator">=&gt;</span>
  <span class="token function">fromEvent</span><span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;</span>app<span class="token punctuation">,</span> eventName<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>AppEventMap<span class="token punctuation">[</span>eventName<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre></div><p>é€šè¿‡ä¸€ä¸ª map çš„æ˜ å°„ï¼Œæ¥è‡ªåŠ¨ç›‘å¬äº‹ä»¶ã€‚</p></div> <div class="content__footer-container"><div class="content__footer"><!----> <!----></div></div></div></div></div></div></div>
    <script src="/electron-flyer/assets/js/app.37dc6e8c.js" defer></script><script src="/electron-flyer/assets/js/21.1073c24e.js" defer></script>
  </body>
</html>
