<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>æ¨¡æ¿ | ç ´æ™“ï¼šé»‘å¤œä¹‹ä¸­çš„ Electron é£è¡ŒæŒ‡å—</title>
    <meta name="description" content="ğŸ¨ Electron æ²¡é‚£ä¹ˆéš¾">
    
    
    <link rel="preload" href="/electron-flyer/assets/css/0.styles.3d6eb61a.css" as="style"><link rel="preload" href="/electron-flyer/assets/js/app.37dc6e8c.js" as="script"><link rel="preload" href="/electron-flyer/assets/js/14.e6db4937.js" as="script"><link rel="prefetch" href="/electron-flyer/assets/js/10.d6a7e726.js"><link rel="prefetch" href="/electron-flyer/assets/js/11.887eb323.js"><link rel="prefetch" href="/electron-flyer/assets/js/12.91b28bd0.js"><link rel="prefetch" href="/electron-flyer/assets/js/13.2a080c63.js"><link rel="prefetch" href="/electron-flyer/assets/js/15.4888b394.js"><link rel="prefetch" href="/electron-flyer/assets/js/16.6209dfc4.js"><link rel="prefetch" href="/electron-flyer/assets/js/17.4dabdbda.js"><link rel="prefetch" href="/electron-flyer/assets/js/18.d91d10ee.js"><link rel="prefetch" href="/electron-flyer/assets/js/19.2288f168.js"><link rel="prefetch" href="/electron-flyer/assets/js/2.6cf72073.js"><link rel="prefetch" href="/electron-flyer/assets/js/20.1d66ae28.js"><link rel="prefetch" href="/electron-flyer/assets/js/21.1073c24e.js"><link rel="prefetch" href="/electron-flyer/assets/js/22.9864bcb1.js"><link rel="prefetch" href="/electron-flyer/assets/js/23.0099ea93.js"><link rel="prefetch" href="/electron-flyer/assets/js/24.2924e65e.js"><link rel="prefetch" href="/electron-flyer/assets/js/25.9ffdaddc.js"><link rel="prefetch" href="/electron-flyer/assets/js/26.549bcbd0.js"><link rel="prefetch" href="/electron-flyer/assets/js/3.7de79766.js"><link rel="prefetch" href="/electron-flyer/assets/js/4.e4c889ba.js"><link rel="prefetch" href="/electron-flyer/assets/js/5.968ec6b8.js"><link rel="prefetch" href="/electron-flyer/assets/js/6.0f1acbba.js"><link rel="prefetch" href="/electron-flyer/assets/js/7.08f680e1.js"><link rel="prefetch" href="/electron-flyer/assets/js/8.01be9bf3.js"><link rel="prefetch" href="/electron-flyer/assets/js/9.b7ab19cb.js">
    <link rel="stylesheet" href="/electron-flyer/assets/css/0.styles.3d6eb61a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme__container sidebar-open"><div class="row"><div class="col-md-2"><div class="sidebar"><div class="group"><div class="group__title">ç« èŠ‚å†…å®¹</div> <div class="group__body"><!---->  <div name="1.html" class="group__category category"><div class="category__label"><a href="/electron-flyer/1.html">å†å²ä»‹ç»</a></div> </div><div name="2.html" class="group__category category"><div class="category__label"><a href="/electron-flyer/2.html">å¼€å‘ç¯å¢ƒ</a></div> </div><div name="3.html" class="group__category category"><div class="category__label"><a href="/electron-flyer/3.html">ä»£ç å°è£…</a></div> </div><div name="4.html" class="group__category category"><div class="category__label"><a href="/electron-flyer/4.html">å‡½æ•°å¼</a></div> </div><div name="5.html" class="group__category category"><div class="category__label"><a href="/electron-flyer/5.html">è·å–å°è¯´å‘½ä»¤è¡Œç‰ˆï¼ˆä¸Šï¼‰</a></div> </div><div name="6.html" class="group__category category"><div class="category__label"><a href="/electron-flyer/6.html">è·å–å°è¯´å‘½ä»¤è¡Œç‰ˆï¼ˆä¸­ï¼‰</a></div> </div><div name="7.html" class="group__category category"><div class="category__label"><a href="/electron-flyer/7.html">è·å–å°è¯´å‘½ä»¤è¡Œç‰ˆï¼ˆä¸‹ï¼‰</a></div> </div><div name="8.html" class="group__category category"><div class="category__label"><a href="/electron-flyer/8.html">åµŒå…¥åˆ°åº”ç”¨ä¸­</a></div> </div><div name="9.html" class="group__category category"><div class="category__label"><a href="/electron-flyer/9.html">æ’ä»¶æœºåˆ¶</a></div> </div><div name="10.html" class="group__category category"><div class="category__label"><a href="/electron-flyer/10.html">æ–‡å­—è½¬è¯­éŸ³</a></div> </div><div name="11.html" class="group__category category"><div class="category__label"><a href="/electron-flyer/11.html">è®¾ç½®ä¸ä¿¡å·ä¸­æ–­</a></div> </div><div name="12.html" class="group__category category"><div class="category__label"><a href="/electron-flyer/12.html">æ’ä»¶å•†åº—</a></div> </div><div name="13.html" class="group__category category"><div class="category__label"><a href="/electron-flyer/13.html">ä¸‹è½½ä¸åˆ é™¤ï¼ˆä¸Šï¼‰</a></div> </div><div name="14.html" class="group__category category"><div class="category__label"><a href="/electron-flyer/14.html">ä¸‹è½½ä¸åˆ é™¤ï¼ˆä¸‹ï¼‰</a></div> </div><div name="15.html" class="group__category category"><div class="category__label"><a href="/electron-flyer/15.html">é€šçŸ¥æ ç¨‹åº</a></div> </div><div name="16.html" class="group__category category"><div class="category__label"><a href="/electron-flyer/16.html">æ’­æ”¾åŠŸèƒ½</a></div> </div><div name="17.html" class="group__category category"><div class="category__label"><a href="/electron-flyer/17.html">ç¾åŒ–ç•Œé¢</a></div> </div><div name="18.html" class="group__category category"><div class="category__label"><a href="/electron-flyer/18.html">æ•°æ®å¯è§†åŒ–ï¼ˆä¸Šï¼‰</a></div> </div><div name="19.html" class="group__category category"><div class="category__label"><a href="/electron-flyer/19.html">æ•°æ®å¯è§†åŒ–ï¼ˆä¸­ï¼‰</a></div> </div><div name="20.html" class="group__category category"><div class="category__label"><a href="/electron-flyer/20.html">æ•°æ®å¯è§†åŒ–ï¼ˆä¸‹ï¼‰</a></div> </div><div name="21.html" class="group__category category"><div class="category__label"><a href="/electron-flyer/21.html" class="router-link-exact-active router-link-active">åµŒå…¥åˆ°åº”ç”¨ä¸­</a></div> </div><div name="22.html" class="group__category category"><div class="category__label"><a href="/electron-flyer/22.html">æ‰“åŒ…åº”ç”¨</a></div> </div></div></div></div></div> <div class="col-md-10"><div class="page__container"><div class="content custom"><p>æœ‰äº†ä¹‹å‰çš„åŸç†ï¼Œç°åœ¨æˆ‘ä»¬åªéœ€è¦æ‹¿åˆ°éŸ³é¢‘çš„æ•°æ®å³å¯ã€‚</p> <h2 id="æ¨¡æ¿"><a href="#æ¨¡æ¿" aria-hidden="true" class="header-anchor">#</a> æ¨¡æ¿</h2> <p>æ·»åŠ ä¸€ä¸ª <code>canvas</code> æ¥æ‰¿è½½éŸ³é¢‘å›¾åƒã€‚</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>music-page { $music ?'show':'hidden' } <span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Back</span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>main {list?'hidden':'show'}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            {#each files as file, index}
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name"><span class="token namespace">on:</span>click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>$set({index})<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{handleName(file)}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
            {/each}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>main play-canvs {list?'show':'hidden'}<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">on:</span>click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>toggleList()<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name"><span class="token namespace">ref:</span>box</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>400<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>400<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>control<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">on:</span>click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>toggleList()<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{title}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>flex<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name"><span class="token namespace">on:</span>click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>file()<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{staticPath + <span class="token punctuation">&quot;</span></span><span class="token attr-name">plus-circle.png&quot;}&quot;</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>25<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>25<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>add<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name"><span class="token namespace">on:</span>click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>play()<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{staticPath + <span class="token punctuation">&quot;</span></span><span class="token attr-name">play-circle.png&quot;}&quot;</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>25<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>25<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>play<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name"><span class="token namespace">on:</span>click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>pause()<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{staticPath + <span class="token punctuation">&quot;</span></span><span class="token attr-name">time-out.png&quot;}&quot;</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>25<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>25<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>stop<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name"><span class="token namespace">on:</span>click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>prev()<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{staticPath + <span class="token punctuation">&quot;</span></span><span class="token attr-name">left-circle.png&quot;}&quot;</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>25<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>25<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>prev<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name"><span class="token namespace">on:</span>click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>next()<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{staticPath +<span class="token punctuation">&quot;</span></span><span class="token attr-name">right-circle.png&quot;}&quot;</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>25<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>25<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>next<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>ä¿®æ”¹ <code>oncreate</code> é’©å­å‡½æ•°ï¼Œåˆ›å»ºéŸ³é¢‘ç¼–è¾‘å™¨ï¼Œå’Œåˆ†æå™¨ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span>ac <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AudioContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>analyser <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ac<span class="token punctuation">.</span><span class="token function">createAnalyser</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="è¯»å–éŸ³é¢‘æ•°æ®"><a href="#è¯»å–éŸ³é¢‘æ•°æ®" aria-hidden="true" class="header-anchor">#</a> è¯»å–éŸ³é¢‘æ•°æ®</h2> <p>ä¿®æ”¹æ’­æ”¾å’Œåœæ­¢æ–¹æ³•ï¼Œè¿™é‡Œæˆ‘å°±æ²¡æœ‰å¯¹éŸ³é‡è¿›è¡Œå¤„ç†äº†ï¼Œå¯¹äºéŸ³é‡éœ€è¦å¦å¤–ä¸€ä¸ª <code>GainNode</code> å¤„ç†å™¨ã€‚é€šè¿‡ç¼–è¾‘å™¨çš„ <code>createMediaElementSource</code> ä» dom é‡Œé¢è¯»å–éŸ³é¢‘æ•°æ®ï¼Œè¿æ¥ <code>analyser</code> æœ€ç»ˆè¿æ¥åˆ° <code>this.ac.destination</code> ç›®çš„åœ°ã€‚</p> <p><code>this.analyser.frequencyBinCount</code> æ˜¯æ•°æ®é•¿åº¦ã€‚ <code>this.analyser.getByteFrequencyData(this.datas)</code> è¯»å–æ•°æ®åˆ° <code>this.datas</code> ä¸­ï¼Œç”±äº <code>this.datas</code> æ˜¯ <code>Uint8</code> æ‰€ä»¥æ˜¯ 0 - 255 çš„èŒƒå›´ã€‚</p> <p> åœ¨åœæ­¢çš„æ—¶å€™è¦é€šè¿‡ <code>requestAnimationFrame</code> å–æ¶ˆåŠ¨ç”»å¸§ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>player<span class="token punctuation">.</span>currentSrc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> <span class="token punctuation">{</span>
              files<span class="token punctuation">,</span>
              index
          <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>store<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
              title<span class="token punctuation">:</span> <span class="token function">handleName</span><span class="token punctuation">(</span>files<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>player<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">&quot;file://&quot;</span> <span class="token operator">+</span> files<span class="token punctuation">[</span>index<span class="token punctuation">]</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">this</span><span class="token punctuation">.</span>player<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

      <span class="token keyword">this</span><span class="token punctuation">.</span>audioSource <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ac<span class="token punctuation">.</span><span class="token function">createMediaElementSource</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>player<span class="token punctuation">)</span>

      <span class="token keyword">this</span><span class="token punctuation">.</span>audioSource<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>analyser<span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>analyser<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>ac<span class="token punctuation">.</span>destination<span class="token punctuation">)</span>

      <span class="token keyword">const</span> <span class="token function-variable function">animate</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>datas <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>analyser<span class="token punctuation">.</span>frequencyBinCount<span class="token punctuation">)</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>analyser<span class="token punctuation">.</span><span class="token function">getByteFrequencyData</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>datas<span class="token punctuation">)</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">animation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>rid <span class="token operator">=</span> <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>animate<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">pause</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>audioSource<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>analyser<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>audioSource<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>ac<span class="token punctuation">.</span>destination<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>rid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">cancelAnimationFrame</span><span class="token punctuation">(</span>rid<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>player<span class="token punctuation">.</span><span class="token function">pause</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h2 id="æ ¸å¿ƒ"><a href="#æ ¸å¿ƒ" aria-hidden="true" class="header-anchor">#</a> æ ¸å¿ƒ</h2> <p>ä»£ç åŸºæœ¬éƒ½æ˜¯ä»ä¸Šä¸€èŠ‚æ¥çš„ï¼ŒåŠ äº†ä¸€ä¸ª <code>step</code> æ­¥è¿›ï¼Œå³å–å€¼é—´çš„è·ç¦»ï¼Œç„¶ååˆè®¡ç®—äº†ä¸€ä¸‹åˆ—æ•°ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">animation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> cvs <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>refs<span class="token punctuation">.</span>box
    <span class="token keyword">const</span> ctx <span class="token operator">=</span> cvs<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> height <span class="token operator">=</span> cvs<span class="token punctuation">.</span>height
    <span class="token keyword">const</span> width <span class="token operator">=</span> cvs<span class="token punctuation">.</span>width
    <span class="token keyword">let</span> w <span class="token operator">=</span> <span class="token number">20</span>
    <span class="token keyword">let</span> h <span class="token operator">=</span> <span class="token number">10</span>
    <span class="token keyword">let</span> margin <span class="token operator">=</span> <span class="token number">5</span> <span class="token comment">// é—´éš”</span>
    <span class="token keyword">let</span> maxSize <span class="token operator">=</span> <span class="token number">24</span> <span class="token comment">// æœ€é«˜æ–¹å—</span>
    <span class="token keyword">let</span> widthSize <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>width <span class="token operator">/</span> w <span class="token operator">+</span> margin<span class="token punctuation">)</span> <span class="token comment">// åˆ—æ•°</span>
    <span class="token keyword">let</span> GreenHightArray <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>widthSize <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>height<span class="token punctuation">)</span>
    <span class="token keyword">let</span> v <span class="token operator">=</span> <span class="token punctuation">(</span>h <span class="token operator">+</span> margin<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1</span> <span class="token comment">// ä¸‹é™é€Ÿåº¦</span>
    <span class="token keyword">let</span> lines <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>height <span class="token operator">/</span> <span class="token punctuation">(</span>h <span class="token operator">+</span> margin<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// è®¡ç®—è¡Œæ•°</span>
    <span class="token keyword">const</span> step <span class="token operator">=</span> <span class="token number">10</span> <span class="token comment">// æ­¥è¿›ï¼ŒæŒ‰æ¯”ä¾‹å–å…¶ä¸­çš„å€¼</span>
    <span class="token keyword">const</span> <span class="token function-variable function">Run</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      ctx<span class="token punctuation">.</span><span class="token function">clearRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">)</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> widthSize<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> val <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>datas<span class="token punctuation">[</span>j <span class="token operator">*</span> step<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">let</span> currentSize <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span> <span class="token punctuation">(</span>val <span class="token operator">/</span> <span class="token number">255</span> <span class="token punctuation">)</span> <span class="token operator">*</span> maxSize<span class="token punctuation">)</span>
        <span class="token keyword">let</span> g <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">createLinearGradient</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> height<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
        g<span class="token punctuation">.</span><span class="token function">addColorStop</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'#233142'</span><span class="token punctuation">)</span>
        g<span class="token punctuation">.</span><span class="token function">addColorStop</span><span class="token punctuation">(</span><span class="token number">0.6</span><span class="token punctuation">,</span> <span class="token string">'#455d7a'</span><span class="token punctuation">)</span>
        g<span class="token punctuation">.</span><span class="token function">addColorStop</span><span class="token punctuation">(</span><span class="token number">0.8</span><span class="token punctuation">,</span> <span class="token string">'#f95959'</span><span class="token punctuation">)</span>
        ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> g
        ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span>j <span class="token operator">*</span> w <span class="token operator">+</span> margin <span class="token operator">*</span> j<span class="token punctuation">,</span> height <span class="token operator">-</span> <span class="token punctuation">(</span>h <span class="token operator">+</span> margin<span class="token punctuation">)</span> <span class="token operator">*</span> currentSize<span class="token punctuation">,</span> w<span class="token punctuation">,</span> <span class="token punctuation">(</span>h <span class="token operator">+</span> margin<span class="token punctuation">)</span> <span class="token operator">*</span> currentSize<span class="token punctuation">)</span>
        <span class="token comment">// ç»¿å—é€»è¾‘</span>
        ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'#08c299'</span>

        <span class="token keyword">let</span> currentGreenHight <span class="token operator">=</span> height <span class="token operator">-</span> currentSize <span class="token operator">*</span> <span class="token punctuation">(</span>h <span class="token operator">+</span> margin<span class="token punctuation">)</span>  <span class="token comment">// åˆ¶é«˜ç‚¹ y åæ ‡ã€‚</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>GreenHightArray<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> v <span class="token operator">&gt;</span> currentGreenHight<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          GreenHightArray<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> currentGreenHight
          ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span>j <span class="token operator">*</span> w <span class="token operator">+</span> margin <span class="token operator">*</span> j<span class="token punctuation">,</span> GreenHightArray<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> w<span class="token punctuation">,</span> h <span class="token operator">+</span> margin<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          GreenHightArray<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+=</span> v
          ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span>j <span class="token operator">*</span> w <span class="token operator">+</span> margin <span class="token operator">*</span> j<span class="token punctuation">,</span> GreenHightArray<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> w<span class="token punctuation">,</span> h <span class="token operator">+</span> margin<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> lines<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        ctx<span class="token punctuation">.</span><span class="token function">clearRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> height <span class="token operator">-</span> i <span class="token operator">*</span> <span class="token punctuation">(</span>h <span class="token operator">+</span> margin<span class="token punctuation">)</span> <span class="token punctuation">,</span> width<span class="token punctuation">,</span> margin<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span>Run<span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p><img src="/electron-flyer/assets/img/end.3d169619.gif" alt></p></div> <div class="content__footer-container"><div class="content__footer"><!----> <!----></div></div></div></div></div></div></div>
    <script src="/electron-flyer/assets/js/app.37dc6e8c.js" defer></script><script src="/electron-flyer/assets/js/14.e6db4937.js" defer></script>
  </body>
</html>
